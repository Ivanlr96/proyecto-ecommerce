<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/logos/favicon-01.svg" type="image/iso-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/styles/subcategory.css">
    <title>SIROKO</title>
</head>

<body>
    <header>
        <nav class="main-nav">
            <div class="nav-left">
                <button id="menu-toggle" aria-label="abrir menú">
                    <i class="fa-solid fa-bars"></i>
                </button>
                <button class="search" aria-label="buscador">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
            </div>

            <div class="logo-container">
                <img src="./assets/logos/black-01.svg" alt="logotipo">
            </div>

            <div class="nav-right">
                <button class="profile" aria-label="perfil">
                    <i class="fa-solid fa-user"></i>
                </button>
                <a href="cart.html" class="cart" aria-label="cesta"><!--Añadido para el carrito-->
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span id="cart-count">  </span><!--Añadido para el carrito-->
                </a>
            </div>
        </nav>
    </header>
    <aside id="side-menu" class="hidden" aria-hidden="true">
        <button id="close-menu" aria-label="cerrar menú">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <!--Categorías-->
        <nav class="gender-tabs">
            <button class="tab active" data-target="woman">MUJER</button>
            <button class="tab" data-target="man">HOMBRE</button>
        </nav>
        <!--Subcategorías mujer-->
        <div id="woman" class="categories active">
            <ul>
                <li><a href="">Chaquetas</a></li>
                <li><a href="">Sudaderas</a></li>
                <li><a href="">Camisetas</a></li>
                <li><a href="">Pantalones</a></li>
                <li><a href="">Leggings</a></li>
                <li><a href="">Sujetadores deportivos</a></li>
                <li><a href="">Accesorios</a></li>
            </ul>
        </div>
        <!--Subcategorías hombre-->
        <div id="man" class="categories categories hidden">
            <ul>
                <li><a href="">Chaquetas</a></li>
                <li><a href="">Sudaderas</a></li>
                <li><a href="">Camisetas</a></li>
                <li><a href="">Pantalones</a></li>
                <li><a href="">Leggings</a></li>
                <li><a href="">Accesorios</a></li>
            </ul>
        </div>
    </aside>

    <main>
        <section class="hero">
            <h1 id="name"></h1>
        </section>

        <main class="page-grid">
            <aside class="sidebar">
                <section>
                    <h4>SORT BY</h4>
                    <div class="sort-options">
                        <label><input type="radio" name="sort" value="low-to-high"> Price: Low to High</label>
                        <label><input type="radio" name="sort" value="high-to-low"> Price: High to Low</label>
                    </div>
            </aside>

            <main class="product-grid" id="product-cards-container">
                <!--            
                <article class="product-card">
                    <div class="product-image">
                        <img src="https://cdn.shopify.com/s/files/1/0156/6146/files/images-TraceGraphicOversizedT_ShirtGSSourPinkB4B3P_KCPK_0681_A_0092_3840x.jpg?v=1746464011"
                            alt="Trace Graphic Oversized T-Shirt">
                        <button class="add-to-cart" aria-label="Add to Cart">
                            <i class="fa-solid fa-cart-plus"></i>
                        </button>
                    </div>
                    <div class="product-details">
                        <h4>Trace Graphic Oversized T-Shirt</h4>
                        <p class="price">30$</p>
                    </div>
                </article>
            -->
            </main>
        </main>
    </main>


    <!-- Footer principal -->
    <section class="footer-content">
        <div class="logo-column">
            <img src="./assets/logos/white-01.svg" alt="Logotipo versión negativo" class="footer-logotipo" />
        </div>

        <div class="center-column">
            <ul class="social-media-row">
                <li><a href="#"><i class="fa-brands fa-facebook"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-x-twitter"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-linkedin-in"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-pinterest"></i></a></li>
            </ul>

            <ul class="legal-links">
                <li><a href="#">Aviso legal</a></li>
                <li><a href="#">Cookies</a></li>
                <li><a href="#">Términos y condiciones</a></li>
                <li><a href="#">Mapa web</a></li>
            </ul>
        </div>
    </section>
    </div>
    </footer>

    <script src="./src/filtro.js"></script>
</body>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cartButtons = document.querySelectorAll(".add-to-cart");
    const cartCount = document.getElementById("cart-count");
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      // Suma cantidades si hay quantity, si no, cuenta elementos
      let count = 0;
      cart.forEach(item => {
        count += item.quantity ? item.quantity : 1;
      });
      cartCount.textContent = count;
    }
    // Inicializar contador
    updateCartCount();
    cartButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const productCard = button.closest(".product-card");
        const title = productCard.querySelector("h4").innerText;
        const price = parseFloat(productCard.querySelector(".price").innerText.replace(/[^0-9.]/g, ""));
        const imgSrc = productCard.querySelector("img").src;
        const product = { name: title, price, image: imgSrc, quantity: 1 };
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        // Si ya existe, suma cantidad
        const existing = cart.find(item => item.name === product.name && item.price === product.price);
        if (existing) {
          existing.quantity += 1;
        } else {
          cart.push(product);
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        window.location.href = "cart.html";
      });
    });
    window.addEventListener("storage", updateCartCount);
  });
</script>

</html>